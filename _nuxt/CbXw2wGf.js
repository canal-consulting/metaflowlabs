import{_ as X}from"./aHje4Ec0.js";import{B as Y,D as Z,b as C,E as q,c as v,o as n,w as h,a as y,h as k,G as S,r as A,d as g,P as ee,p as F,n as j,_ as te,k as _,t as U,ag as se,F as G,A as N,M as E,z as re,S as V,ax as ae,ay as oe,az as ne,aA as le,a4 as ie,m as ce,s as ue}from"./C1HwacJA.js";import{M as K}from"./_zexT9-W.js";import{s as $}from"./BEoR3jWl.js";import{_ as de}from"./Cl3PwVJS.js";import{q as J}from"./Cgw4wXts.js";import{u as M}from"./BPlNW2Cn.js";const pe={slots:{root:"rounded-lg",header:"p-4 sm:px-6",body:"p-4 sm:p-6",footer:"p-4 sm:px-6"},variants:{variant:{solid:{root:"bg-inverted text-inverted"},outline:{root:"bg-default ring ring-default divide-y divide-default"},soft:{root:"bg-elevated/50 divide-y divide-default"},subtle:{root:"bg-elevated/50 ring ring-default divide-y divide-default"}}},defaultVariants:{variant:"outline"}},R={__name:"UCard",props:{as:{type:null,required:!1},variant:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(c){const r=c,l=Y(),d=Z(),u=C(()=>{var o;return q({extend:q(pe),...((o=d.ui)==null?void 0:o.card)||{}})({variant:r.variant})});return(o,m)=>{var e;return n(),v(g(ee),{as:c.as,class:S(u.value.root({class:[r.class,(e=r.ui)==null?void 0:e.root]}))},{default:h(()=>{var t,s,a;return[l.header?(n(),y("div",{key:0,class:S(u.value.header({class:(t=r.ui)==null?void 0:t.header}))},[A(o.$slots,"header")],2)):k("",!0),l.default?(n(),y("div",{key:1,class:S(u.value.body({class:(s=r.ui)==null?void 0:s.body}))},[A(o.$slots,"default")],2)):k("",!0),l.footer?(n(),y("div",{key:2,class:S(u.value.footer({class:(a=r.ui)==null?void 0:a.footer}))},[A(o.$slots,"footer")],2)):k("",!0)]}),_:3},8,["as","class"])}}},fe={class:"flex items-center gap-3"},me={class:"text-lg font-semibold text-[var(--ui-text-toned)]"},ge={class:"text-sm text-[var(--ui-text-muted)] line-clamp-2"},ye={class:"flex flex-col items-stretch gap-3 sm:flex-row sm:items-center sm:justify-between sm:gap-2"},_e={class:"flex flex-wrap gap-2"},he=F({__name:"Card",props:{project:{}},setup(c){return(r,l)=>{const d=E,u=se,o=te,m=R;return n(),v(g(K),{hover:{scale:1.02,y:-3},transition:{duration:.2,ease:"easeOut"},as:"div",class:"block h-full cursor-pointer"},{default:h(()=>[j(o,{to:r.project.path,class:"block h-full"},{default:h(()=>[j(m,{ui:{root:"relative w-full h-full flex flex-col ring-1 ring-[var(--ui-border-accented)] bg-[var(--ui-bg)]",header:"px-4 py-3 sm:px-6 sm:py-2",body:"p-3 flex-1",footer:"px-3 py-3 sm:px-6 sm:py-2"}},{header:h(()=>[_("div",fe,[r.project.icon?(n(),v(d,{key:0,name:r.project.icon,class:"size-2 text-[var(--ui-primary)]"},null,8,["name"])):k("",!0),_("h3",me,U(r.project.title),1)])]),footer:h(()=>[_("div",ye,[_("div",_e,[r.project.phase?(n(),v(o,{key:0,to:`/projects?phase=${g($)(r.project.phase)}`},{default:h(()=>[j(u,{label:r.project.phase,color:"primary",size:"md",variant:"soft"},null,8,["label"])]),_:1},8,["to"])):k("",!0),r.project.category&&r.project.category.length?(n(!0),y(G,{key:1},N(r.project.category,e=>(n(),v(o,{key:e,to:`/projects?category=${g($)(e)}`},{default:h(()=>[j(u,{label:e,color:"neutral",size:"md",variant:"outline"},null,8,["label"])]),_:2},1032,["to"]))),128)):k("",!0)])])]),default:h(()=>[_("p",ge,U(r.project.description),1)]),_:1})]),_:1},8,["to"])]),_:1})}}}),ve=Object.assign(he,{__name:"ProjectCard"}),be={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"},je=F({__name:"Grid",setup(c){return(r,l)=>(n(),y("div",be,[A(r.$slots,"default")]))}}),xe=Object.assign(je,{__name:"ProjectGrid"}),Ce={class:"flex flex-col items-center text-center"},ke={class:"text-lg font-medium text-[var(--ui-text-highlighted)] mb-1"},Pe={class:"flex items-center gap-3"},Se=F({__name:"EmptyCard",props:{label:{default:"No projects match your criteria."}},setup(c){return(r,l)=>{const d=E,u=R;return n(),v(u,{variant:"subtle",ui:{body:"py-12 px-6"}},{default:h(()=>[_("div",Ce,[j(d,{name:"i-lucide-folder-search",class:"w-12 h-12 text-[var(--ui-text-muted)] mb-4","aria-hidden":"true"}),_("p",ke,U(r.label),1),l[0]||(l[0]=_("p",{class:"text-sm text-[var(--ui-text-muted)] mb-6"}," Try adjusting your filters or view all projects. ",-1)),_("div",Pe,[A(r.$slots,"default")])])]),_:3})}}}),we=Object.assign(Se,{__name:"ProjectEmptyCard"}),$e={key:0,class:"flex flex-col gap-y-2.5 items-start"},Oe={class:"grid grid-cols-[6rem,1fr] gap-x-4 items-center"},Ae={class:"flex flex-row flex-wrap gap-x-2 gap-y-2 items-center"},Ue=F({__name:"ProjectFilterBar",props:{filterGroup:{},titleClass:{default:"text-sm font-semibold uppercase tracking-wide text-[var(--ui-text-muted)] mb-0"}},emits:["update:filterGroup"],setup(c,{emit:r}){const l=c,d=r;function u(o){const{dimensionKey:m,selectedValues:e}=l.filterGroup,t=new Set(e);t.has(o)?t.delete(o):t.add(o),d("update:filterGroup",{dimensionKey:m,newSelectedValues:Array.from(t)})}return(o,m)=>{const e=re;return o.filterGroup?(n(),y("div",$e,[(n(),y("div",{key:o.filterGroup.dimensionKey,class:"space-y-2 w-full"},[_("div",Oe,[_("div",Ae,[_("h3",{class:S(l.titleClass)},U(o.filterGroup.title),3),(n(!0),y(G,null,N(o.filterGroup.options,t=>(n(),v(e,{key:t.key,active:o.filterGroup.selectedValues.includes(t.key),label:t.label+(t.count?` (${t.count})`:""),"active-color":"primary","active-variant":"solid",color:"neutral",size:"sm",variant:"outline",onClick:s=>u(t.key)},null,8,["active","label","onClick"]))),128))])])]))])):k("",!0)}}}),Fe=Object.assign(Ue,{__name:"ProjectFilterBar"}),L=()=>{const c=oe(),r=ne(),l=V([]),d=V([]),u=e=>{let t="";return Array.isArray(e)?t=e.length>0?String(e[0]):"":typeof e=="string"&&(t=e),t.trim()!==""?t.split(",").map(s=>s.trim()).filter(s=>s!==""):[]};ae(()=>{const e=u(c.query.phase);JSON.stringify(l.value)!==JSON.stringify(e)&&(l.value=e);const t=u(c.query.category);JSON.stringify(d.value)!==JSON.stringify(t)&&(d.value=t)});const o=()=>{const e={...c.query},t={};for(const i in e)i!=="phase"&&i!=="category"&&(typeof e[i]=="string"?t[i]=e[i]:Array.isArray(e[i])&&e[i].length>0&&typeof e[i][0]=="string"&&(t[i]=e[i][0]));l.value.length>0&&(t.phase=l.value.join(",")),d.value.length>0&&(t.category=d.value.join(","));const s=i=>Object.keys(i).filter(b=>i[b]!==void 0&&i[b]!==null).sort().map(b=>`${encodeURIComponent(b)}=${encodeURIComponent(String(i[b]))}`).join("&"),a=s(e),p=s(t);a!==p&&r.replace({query:t})};return{selectedPhases:l,selectedCategories:d,setFilterValues:(e,t)=>{const s=[...new Set(t.map(a=>String(a).trim()).filter(a=>a!==""))];e==="phase"?JSON.stringify(l.value)!==JSON.stringify(s)&&(l.value=s):e==="category"&&JSON.stringify(d.value)!==JSON.stringify(s)&&(d.value=s),o()}}},Ge=()=>{const c=le("projects-list",()=>[]),{selectedPhases:r,selectedCategories:l}=L(),{data:d,error:u,pending:o}=M("projects-fetch",async()=>{try{const s=await J("projects").order("phase","ASC").order("title","ASC").all();return Array.isArray(s)?s:(console.warn("[useProjects] fetchedProjects was null or not an array."),[])}catch(s){return console.error("[useProjects] Failed to fetch projects inside useAsyncData:",s),[]}},{server:!0});ie(d,s=>{s&&(c.value=s)},{immediate:!0});const m=C(()=>[...new Set(c.value.map(a=>a.phase).filter(a=>typeof a=="string"&&a.trim()!==""))].map(a=>({key:$(a),label:a})).sort((a,p)=>a.label.localeCompare(p.label))),e=C(()=>{const s=c.value.flatMap(p=>p.category||[]);return[...new Set(s.filter(p=>typeof p=="string"&&p.trim()!==""))].map(p=>({key:$(p),label:p})).sort((p,i)=>p.label.localeCompare(i.label))}),t=C(()=>{const s=c.value,a=r.value,p=l.value;return a.length===0&&p.length===0?s:s.filter(i=>{const O=i.phase?$(i.phase):"",b=a.length===0||O&&a.includes(O);if(a.length>0&&!b)return!1;const P=i.category?i.category.map(f=>$(f)):[],B=p.length===0||P.length>0&&P.some(f=>p.includes(f));return b&&B})});return{projects:c,phaseOptions:m,categoryOptions:e,filteredProjects:t,pending:o,error:u}},Ne=()=>{const{selectedPhases:c,selectedCategories:r}=L(),l=()=>`projects-landing-phases-${c.value.join("-")||"all"}-categories-${r.value.join("-")||"all"}`,{data:d,pending:u,error:o}=M(l,async()=>{const m=c.value,e=r.value,t={title:"Projects",description:"Explore projects developed by Metaflowlabs."};try{if(e.length>0||m.length>1)return t;let s=null;const a=J("projectsLanding");return m.length===1?s=await a.where("phase","=",m[0]).first():s=await a.where("id","=","2.projects:projects").first(),s??t}catch(s){return console.error("[useProjectsLanding] Failed to fetch specific landing page data:",s),t}},{watch:[c,r],server:!0});return{page:d,pending:u,error:o}},Be={class:"grid grid-cols-12 gap-4"},Ee={class:"flex flex-col justify-start mb-6 lg:mb-6"},Le={key:0,class:"space-y-0 mb-0 ml-20"},qe=["aria-labelledby"],Ve=["id"],Ke={key:1,class:"text-sm text-[var(--ui-text-muted)] text-center mb-6 lg:mb-8"},Je={key:0,class:"flex flex-col items-center justify-center h-64"},Me={key:1,class:"text-center text-error-500 dark:text-error-400"},Xe=F({__name:"index",setup(c){const{selectedPhases:r,selectedCategories:l,setFilterValues:d}=L(),{phaseOptions:u,categoryOptions:o,filteredProjects:m,pending:e,error:t}=Ge(),{page:s,pending:a,error:p}=Ne(),i=C(()=>{var f;return((f=s.value)==null?void 0:f.title)||"Projects"}),O=C(()=>{var f;return((f=s.value)==null?void 0:f.description)||"Explore projects developed by Metaflowlabs."}),b=C(()=>[{label:"Home",to:"/",icon:"i-heroicons-home-solid"},{label:"Projects",icon:"i-heroicons-code-bracket-square-solid"}]);ce({title:()=>i.value,meta:[{name:"description",content:()=>O.value}]});const P=C(()=>{const f=[];return u.value&&u.value.length>0&&f.push({dimensionKey:"phase",title:"Phase",options:u.value,selectedValues:r.value}),o.value&&o.value.length>0&&f.push({dimensionKey:"category",title:"Category",options:o.value,selectedValues:l.value}),f}),B=f=>{d(f.dimensionKey,f.newSelectedValues)};return(f,Re)=>{const z=X,D=E,Q=ve,I=xe,T=we,H=de,W=ue;return n(),v(W,{class:"py-8 lg:py-12"},{default:h(()=>[_("div",Be,[j(H,{class:"col-span-12"},{breadcrumbs:h(()=>[j(z,{items:b.value},null,8,["items"])]),default:h(()=>[_("div",Ee,[!g(e)&&!g(a)&&P.value.length>0?(n(),y("div",Le,[(n(!0),y(G,null,N(P.value,(x,w)=>(n(),y("div",{key:x.dimensionKey,"aria-labelledby":`filter-group-title-${x.dimensionKey}`,class:S([{"mb-1":w===0,"mb-0":w===P.value.length-1},"p-1 rounded-md bg-[--ui-bg-muted] dark:bg-[--ui-bg-elevated] shadow-sm"]),role:"group"},[_("h3",{id:`filter-group-title-${x.dimensionKey}`,class:"sr-only"}," Filter by "+U(x.title),9,Ve),j(Fe,{class:S("pb-1"),"filter-group":x,"title-class":w===0?"text-sm font-bold uppercase tracking-wide text-[var(--ui-text-muted)] mb-0 mr-7":"text-sm font-bold uppercase tracking-wide text-[var(--ui-text-muted)] mb-0","onUpdate:filterGroup":B},null,8,["class","filter-group","title-class"])],10,qe))),128))])):!g(e)&&!g(a)&&P.value.length===0?(n(),y("p",Ke," No filter options available. ")):k("",!0)]),g(e)||g(a)?(n(),y("div",Je,[j(D,{class:"animate-spin text-4xl text-[var(--ui-primary)]",name:"i-lucide-loader-circle"})])):g(t)||g(p)?(n(),y("div",Me," Error loading projects. Please try again later. ")):g(m).length>0?(n(),v(I,{key:2},{default:h(()=>[(n(!0),y(G,null,N(g(m),(x,w)=>(n(),v(g(K),{key:x.path,tag:"div",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:w*.075,ease:"easeOut"},class:"h-full"},{default:h(()=>[j(Q,{project:x,class:"h-full"},null,8,["project"])]),_:2},1032,["transition"]))),128))]),_:1})):(n(),v(T,{key:3}))]),_:1})])]),_:1})}}});export{Xe as default};
