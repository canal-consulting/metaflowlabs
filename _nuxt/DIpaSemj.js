import{_ as D}from"./aHje4Ec0.js";import{u as H,_ as U}from"./CDYSDQHH.js";import{_ as V}from"./Cho71RTy.js";import{p as j,v as z,b as T,q as C,x as R,m as K,c as x,a as i,d as t,w as d,k as m,h as v,t as f,s as M,y as W,o as r,n as b,z as O,i as P,F as G,A as J,_ as Q}from"./C1HwacJA.js";import{_ as X}from"./Cl3PwVJS.js";import{u as L}from"./BPlNW2Cn.js";import{q as N,a as Y}from"./Cgw4wXts.js";const Z={class:"prose dark:prose-invert max-w-none prose-headings:scroll-mt-24"},ee={key:0,class:"mt-12 pt-8 border-t border-[var(--ui-border)] flex items-center justify-between gap-8"},te={key:1,class:"flex-1"},ae={key:3,class:"flex-1"},ne={key:1,class:"mt-12 pt-8 border-t border-[var(--ui-border)]"},oe={class:"space-y-4"},re={key:0,class:"mt-1 text-sm text-[var(--ui-text-muted)]"},se={key:1,class:"text-center p-8"},le={class:"text-xl text-red-500"},ie={key:0},ce={key:2,class:"text-center p-8"},xe=j({__name:"[...slug]",async setup(ue){let s,p;const y=z(),S=T(()=>{if(y.params&&"slug"in y.params){const e=y.params.slug;if(Array.isArray(e))return e.filter(a=>typeof a=="string"&&a.length>0);if(typeof e=="string"&&e.length>0)return[e]}return[]}),c=T(()=>`/learn/${S.value.join("/")}`),{data:o,error:w}=([s,p]=C(async()=>L(()=>`learn-content-${c.value}`,async()=>{try{return await N("learn").path(c.value).first()}catch(e){throw console.error(`Error fetching content from collection 'learn' with path '${c.value}':`,e.message),W({statusCode:500,statusMessage:"Failed to load content",fatal:!0,cause:e})}},"$aWzluH1NHC")),s=await s,p(),s),E=e=>typeof e.navigation=="object"&&e.navigation.title?e.navigation.title:e.navigationTitle||e.title||"Untitled Article",k=T(()=>!!o.value&&o.value.path===c.value&&!!o.value.stem&&o.value.stem.endsWith("/index")),{data:A}=([s,p]=C(async()=>L(`learn-${y.path}-articles`,async()=>{var e;if(k.value&&o.value&&o.value.path)try{const a=o.value.path,l=a==="/"?"/":a.replace(/\/$/,"");return await N("learn").where("path","<>",l).where("path","LIKE",`${l}/%`).where("path","NOT LIKE",`${l}/%/%`).order("order","ASC").order("title","ASC").all()}catch(a){return console.error(`Error fetching articles for section 'learn' (path: ${(e=o.value)==null?void 0:e.path}):`,a.message),[]}return[]},{watch:[o,k]})),s=await s,p(),s),$=R(async()=>{const e=[{label:"Home",to:"/",icon:"i-heroicons-home-solid"},{label:"Learn",to:"/learn",icon:"i-heroicons-academic-cap-solid"}];if(!o.value)return e;const a=S.value;let l="/learn";for(let _=0;_<a.length-1;_++){const h=a[_];l+=`/${h}`;try{const u=await N("learn").select("title","navigationTitle","path").path(l).first();u?e.push({label:u.navigationTitle||u.title||h.replaceAll("-"," "),to:l}):e.push({label:(h||"section").replaceAll("-"," "),to:l})}catch(u){console.warn(`Failed to fetch index page for breadcrumb segment ${l}:`,u),e.push({label:(h||"section").replaceAll("-"," "),to:l})}}return e.push({label:o.value.navigationTitle||o.value.title||"Article"}),e},[]),{data:n,pending:de,error:me}=([s,p]=C(()=>L(()=>`learn-surround-${c.value}`,()=>c.value?Y("learn",c.value,{before:1,after:1,fields:["title","path","navigationTitle","order"]}).order("order","ASC"):Promise.resolve(null),{watch:[c]})),s=await s,p(),s),{learnSidebarNavItems:B}=H();return K({title:()=>{var e;return((e=o.value)==null?void 0:e.title)||"Learn Article"},meta:[{name:"description",content:()=>{var e;return((e=o.value)==null?void 0:e.description)||"Detailed learning material from Metaflowlabs."}}]}),(e,a)=>{const l=D,_=U,h=V,u=O,q=Q,F=X,I=M;return t(o)?(r(),x(I,{key:0,class:"py-8 lg:py-12"},{default:d(()=>[b(F,null,{breadcrumbs:d(()=>[t($)&&t($).length>0?(r(),x(l,{key:0,items:t($)},null,8,["items"])):v("",!0)]),aside:d(()=>[b(_,{items:t(B)},null,8,["items"])]),main:d(()=>[m("article",Z,[b(h,{value:t(o)},null,8,["value"])]),t(n)&&(t(n)[0]||t(n)[1])?(r(),i("div",ee,[t(n)[0]?(r(),x(u,{key:0,label:(typeof t(n)[0].navigationTitle=="string"?t(n)[0].navigationTitle:void 0)||t(n)[0].title,to:t(n)[0].path,class:"text-left",color:"neutral",icon:"i-heroicons-arrow-left-solid",variant:"outline"},{label:d(()=>[a[0]||(a[0]=m("span",{class:"block text-xs text-[var(--ui-text-muted)] mb-0.5"},"Previous",-1)),P(" "+f(t(n)[0].navigationTitle||t(n)[0].title),1)]),_:1},8,["label","to"])):(r(),i("span",te)),t(n)[1]?(r(),x(u,{key:2,label:(typeof t(n)[1].navigationTitle=="string"?t(n)[1].navigationTitle:void 0)||t(n)[1].title,to:t(n)[1].path,class:"text-right",color:"neutral",icon:"i-heroicons-arrow-right-solid",trailing:"",variant:"outline"},{label:d(()=>[a[1]||(a[1]=m("span",{class:"block text-xs text-[var(--ui-text-muted)] mb-0.5"},"Next",-1)),P(" "+f(t(n)[1].navigationTitle||t(n)[1].title),1)]),_:1},8,["label","to"])):(r(),i("span",ae))])):v("",!0),k.value&&t(A)&&t(A).length>0?(r(),i("section",ne,[a[2]||(a[2]=m("h2",{class:"text-2xl font-semibold mb-6 text-[var(--ui-text-highlighted)]"}," Articles in this section: ",-1)),m("ul",oe,[(r(!0),i(G,null,J(t(A),g=>(r(),i("li",{key:g.path},[b(q,{to:g.path,class:"text-lg font-medium text-[var(--ui-primary)] hover:underline"},{default:d(()=>[P(f(E(g)),1)]),_:2},1032,["to"]),g.description?(r(),i("p",re,f(g.description),1)):v("",!0)]))),128))])])):v("",!0)]),_:1})]),_:1})):t(w)?(r(),i("div",se,[m("p",le," Error loading page: "+f(t(w).message),1),t(w).statusCode===404?(r(),i("p",ie," The requested learn section or article could not be found. ")):v("",!0)])):(r(),i("div",ce,a[3]||(a[3]=[m("p",null,"Loading content or content not found...",-1)])))}}});export{xe as default};
