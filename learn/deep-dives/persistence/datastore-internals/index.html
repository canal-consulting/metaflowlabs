<!DOCTYPE html><html  lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><style id="nuxt-ui-colors">@layer base {
  :root {
  --ui-color-primary-50: var(--color-primary-50, );
  --ui-color-primary-100: var(--color-primary-100, );
  --ui-color-primary-200: var(--color-primary-200, );
  --ui-color-primary-300: var(--color-primary-300, );
  --ui-color-primary-400: var(--color-primary-400, );
  --ui-color-primary-500: var(--color-primary-500, );
  --ui-color-primary-600: var(--color-primary-600, );
  --ui-color-primary-700: var(--color-primary-700, );
  --ui-color-primary-800: var(--color-primary-800, );
  --ui-color-primary-900: var(--color-primary-900, );
  --ui-color-primary-950: var(--color-primary-950, );
  --ui-color-secondary-50: var(--color-secondary-50, );
  --ui-color-secondary-100: var(--color-secondary-100, );
  --ui-color-secondary-200: var(--color-secondary-200, );
  --ui-color-secondary-300: var(--color-secondary-300, );
  --ui-color-secondary-400: var(--color-secondary-400, );
  --ui-color-secondary-500: var(--color-secondary-500, );
  --ui-color-secondary-600: var(--color-secondary-600, );
  --ui-color-secondary-700: var(--color-secondary-700, );
  --ui-color-secondary-800: var(--color-secondary-800, );
  --ui-color-secondary-900: var(--color-secondary-900, );
  --ui-color-secondary-950: var(--color-secondary-950, );
  --ui-color-info-50: var(--color-info-50, );
  --ui-color-info-100: var(--color-info-100, );
  --ui-color-info-200: var(--color-info-200, );
  --ui-color-info-300: var(--color-info-300, );
  --ui-color-info-400: var(--color-info-400, );
  --ui-color-info-500: var(--color-info-500, );
  --ui-color-info-600: var(--color-info-600, );
  --ui-color-info-700: var(--color-info-700, );
  --ui-color-info-800: var(--color-info-800, );
  --ui-color-info-900: var(--color-info-900, );
  --ui-color-info-950: var(--color-info-950, );
  --ui-color-success-50: var(--color-success-50, );
  --ui-color-success-100: var(--color-success-100, );
  --ui-color-success-200: var(--color-success-200, );
  --ui-color-success-300: var(--color-success-300, );
  --ui-color-success-400: var(--color-success-400, );
  --ui-color-success-500: var(--color-success-500, );
  --ui-color-success-600: var(--color-success-600, );
  --ui-color-success-700: var(--color-success-700, );
  --ui-color-success-800: var(--color-success-800, );
  --ui-color-success-900: var(--color-success-900, );
  --ui-color-success-950: var(--color-success-950, );
  --ui-color-warning-50: var(--color-warning-50, );
  --ui-color-warning-100: var(--color-warning-100, );
  --ui-color-warning-200: var(--color-warning-200, );
  --ui-color-warning-300: var(--color-warning-300, );
  --ui-color-warning-400: var(--color-warning-400, );
  --ui-color-warning-500: var(--color-warning-500, );
  --ui-color-warning-600: var(--color-warning-600, );
  --ui-color-warning-700: var(--color-warning-700, );
  --ui-color-warning-800: var(--color-warning-800, );
  --ui-color-warning-900: var(--color-warning-900, );
  --ui-color-warning-950: var(--color-warning-950, );
  --ui-color-error-50: var(--color-error-50, );
  --ui-color-error-100: var(--color-error-100, );
  --ui-color-error-200: var(--color-error-200, );
  --ui-color-error-300: var(--color-error-300, );
  --ui-color-error-400: var(--color-error-400, );
  --ui-color-error-500: var(--color-error-500, );
  --ui-color-error-600: var(--color-error-600, );
  --ui-color-error-700: var(--color-error-700, );
  --ui-color-error-800: var(--color-error-800, );
  --ui-color-error-900: var(--color-error-900, );
  --ui-color-error-950: var(--color-error-950, );
  --ui-color-neutral-50: var(--color-slate-50, oklch(98.4% 0.003 247.858));
  --ui-color-neutral-100: var(--color-slate-100, oklch(96.8% 0.007 247.896));
  --ui-color-neutral-200: var(--color-slate-200, oklch(92.9% 0.013 255.508));
  --ui-color-neutral-300: var(--color-slate-300, oklch(86.9% 0.022 252.894));
  --ui-color-neutral-400: var(--color-slate-400, oklch(70.4% 0.04 256.788));
  --ui-color-neutral-500: var(--color-slate-500, oklch(55.4% 0.046 257.417));
  --ui-color-neutral-600: var(--color-slate-600, oklch(44.6% 0.043 257.281));
  --ui-color-neutral-700: var(--color-slate-700, oklch(37.2% 0.044 257.287));
  --ui-color-neutral-800: var(--color-slate-800, oklch(27.9% 0.041 260.031));
  --ui-color-neutral-900: var(--color-slate-900, oklch(20.8% 0.042 265.755));
  --ui-color-neutral-950: var(--color-slate-950, oklch(12.9% 0.042 264.695));
  }
  :root, .light {
  --ui-primary: var(--ui-color-primary-500);
  --ui-secondary: var(--ui-color-secondary-500);
  --ui-info: var(--ui-color-info-500);
  --ui-success: var(--ui-color-success-500);
  --ui-warning: var(--ui-color-warning-500);
  --ui-error: var(--ui-color-error-500);
  }
  .dark {
  --ui-primary: var(--ui-color-primary-400);
  --ui-secondary: var(--ui-color-secondary-400);
  --ui-info: var(--ui-color-info-400);
  --ui-success: var(--ui-color-success-400);
  --ui-warning: var(--ui-color-warning-400);
  --ui-error: var(--ui-color-error-400);
  }
}</style><title>Metaflow Datastore Internals: Caching and Resume - Metaflowlabs</title><style>pre code .line{display:block}</style><link rel="stylesheet" href="/_nuxt/entry.DM2nVY7q.css" crossorigin><style>:where(.i-heroicons\:academic-cap-solid){display:inline-block;width:1em;height:1em;background-color:currentColor;-webkit-mask-image:var(--svg);mask-image:var(--svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;--svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cg fill='black'%3E%3Cpath d='M11.7 2.805a.75.75 0 0 1 .6 0A60.7 60.7 0 0 1 22.83 8.72a.75.75 0 0 1-.231 1.337a50 50 0 0 0-9.902 3.912l-.003.002l-.34.18a.75.75 0 0 1-.707 0A51 51 0 0 0 7.5 12.173v-.224a.36.36 0 0 1 .172-.311a55 55 0 0 1 4.653-2.52a.75.75 0 0 0-.65-1.352a56 56 0 0 0-4.78 2.589a1.86 1.86 0 0 0-.859 1.228a50 50 0 0 0-4.634-1.527a.75.75 0 0 1-.231-1.337A60.7 60.7 0 0 1 11.7 2.805'/%3E%3Cpath d='M13.06 15.473a48.5 48.5 0 0 1 7.666-3.282q.202 2.122.255 4.284a.75.75 0 0 1-.46.711a48 48 0 0 0-8.105 4.342a.75.75 0 0 1-.832 0a48 48 0 0 0-8.104-4.342a.75.75 0 0 1-.461-.71q.053-2.163.255-4.286q1.382.456 2.726.99v1.27a1.5 1.5 0 0 0-.14 2.508c-.09.38-.222.753-.397 1.11q.678.32 1.346.66a6.7 6.7 0 0 0 .551-1.607a1.5 1.5 0 0 0 .14-2.67v-.645a49 49 0 0 1 3.44 1.667a2.25 2.25 0 0 0 2.12 0'/%3E%3Cpath d='M4.462 19.462c.42-.419.753-.89 1-1.395q.68.321 1.347.662a6.7 6.7 0 0 1-1.286 1.794a.75.75 0 0 1-1.06-1.06'/%3E%3C/g%3E%3C/svg%3E")}:where(.i-heroicons\:arrow-left-solid){display:inline-block;width:1em;height:1em;background-color:currentColor;-webkit-mask-image:var(--svg);mask-image:var(--svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;--svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='black' fill-rule='evenodd' d='M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0' clip-rule='evenodd'/%3E%3C/svg%3E")}:where(.i-heroicons\:arrow-right-solid){display:inline-block;width:1em;height:1em;background-color:currentColor;-webkit-mask-image:var(--svg);mask-image:var(--svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;--svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='black' fill-rule='evenodd' d='M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06' clip-rule='evenodd'/%3E%3C/svg%3E")}:where(.i-heroicons\:code-bracket-square-solid){display:inline-block;width:1em;height:1em;background-color:currentColor;-webkit-mask-image:var(--svg);mask-image:var(--svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;--svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='black' fill-rule='evenodd' d='M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm14.25 6a.75.75 0 0 1-.22.53l-2.25 2.25a.75.75 0 1 1-1.06-1.06L15.44 12l-1.72-1.72a.75.75 0 1 1 1.06-1.06l2.25 2.25c.141.14.22.331.22.53m-10.28-.53a.75.75 0 0 0 0 1.06l2.25 2.25a.75.75 0 1 0 1.06-1.06L8.56 12l1.72-1.72a.75.75 0 1 0-1.06-1.06z' clip-rule='evenodd'/%3E%3C/svg%3E")}:where(.i-heroicons\:information-circle-solid){display:inline-block;width:1em;height:1em;background-color:currentColor;-webkit-mask-image:var(--svg);mask-image:var(--svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;--svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='black' fill-rule='evenodd' d='M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75s-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12m8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836l.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836l-.042.02a.75.75 0 1 1-.671-1.34zM12 9a.75.75 0 1 0 0-1.5a.75.75 0 0 0 0 1.5' clip-rule='evenodd'/%3E%3C/svg%3E")}:where(.i-heroicons\:light-bulb-solid){display:inline-block;width:1em;height:1em;background-color:currentColor;-webkit-mask-image:var(--svg);mask-image:var(--svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;--svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cg fill='black'%3E%3Cpath d='M12 .75a8.25 8.25 0 0 0-4.135 15.39c.686.398 1.115 1.008 1.134 1.623a.75.75 0 0 0 .577.706q.528.124 1.074.195c.323.041.6-.218.6-.544v-4.661a7 7 0 0 1-.937-.171a.75.75 0 1 1 .374-1.453a5.26 5.26 0 0 0 2.626 0a.75.75 0 1 1 .374 1.452a7 7 0 0 1-.937.172v4.66a.54.54 0 0 0 .6.545q.546-.07 1.074-.195a.75.75 0 0 0 .577-.706c.02-.615.448-1.225 1.134-1.623A8.25 8.25 0 0 0 12 .75'/%3E%3Cpath fill-rule='evenodd' d='M9.013 19.9a.75.75 0 0 1 .877-.597a11.3 11.3 0 0 0 4.22 0a.75.75 0 1 1 .28 1.473a12.8 12.8 0 0 1-4.78 0a.75.75 0 0 1-.597-.876m.741 2.444a.75.75 0 0 1 .824-.668a13.7 13.7 0 0 0 2.844 0a.75.75 0 1 1 .156 1.492a15 15 0 0 1-3.156 0a.75.75 0 0 1-.668-.824' clip-rule='evenodd'/%3E%3C/g%3E%3C/svg%3E")}:where(.i-heroicons\:pencil-square){display:inline-block;width:1em;height:1em;background-color:currentColor;-webkit-mask-image:var(--svg);mask-image:var(--svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;--svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m16.862 4.487l1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10'/%3E%3C/svg%3E")}:where(.i-lucide\:chevron-down){display:inline-block;width:1em;height:1em;background-color:currentColor;-webkit-mask-image:var(--svg);mask-image:var(--svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;--svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m6 9l6 6l6-6'/%3E%3C/svg%3E")}:where(.i-lucide\:link){display:inline-block;width:1em;height:1em;background-color:currentColor;-webkit-mask-image:var(--svg);mask-image:var(--svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;--svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cg fill='none' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'%3E%3Cpath d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'/%3E%3Cpath d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'/%3E%3C/g%3E%3C/svg%3E")}:where(.i-simple-icons\:github){display:inline-block;width:1em;height:1em;background-color:currentColor;-webkit-mask-image:var(--svg);mask-image:var(--svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;--svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='black' d='M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/%3E%3C/svg%3E")}</style><link rel="preload" as="fetch" crossorigin="anonymous" href="/learn/deep-dives/persistence/datastore-internals/_payload.json?e8a50514-ba79-48d6-ba68-8e0d052a8232"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/C1HwacJA.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DIpaSemj.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/aHje4Ec0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CDYSDQHH.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Cho71RTy.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Cl3PwVJS.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BPlNW2Cn.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Cgw4wXts.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CeeWkT4o.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/j6l2yQcD.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DlAUqK2U.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Do40aHCh.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/GKegGU1e.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Bb9Pjfmk.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/GlcX9s9a.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/JbZZqAuX.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DO7fD2c3.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/TGgqFi47.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B6uKCSBP.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/7GZylB92.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ns3-NFuK.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DVQ3rfX6.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/TgPdPaHX.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CE0z4SRT.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/FFEdz8PM.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/e8a50514-ba79-48d6-ba68-8e0d052a8232.json"><link rel="prefetch" as="style" crossorigin href="/_nuxt/index.B1FApBYP.css"><link rel="prefetch" as="script" crossorigin href="/_nuxt/D4L2so53.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/iwAoypty.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DN3lNRrg.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DAsEtr0T.js"><link rel="icon" href="/favicon.ico" sizes="any"><link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><meta property="og:type" content="website"><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><meta name="description" content="Explore how Metaflow interacts with the datastore, enabling features like caching and resume."><meta property="og:image" content="https://metaflowlabs.nuxt.space/og.png"><script type="module" src="/_nuxt/C1HwacJA.js" crossorigin></script><meta name="twitter:card" content="summary_large_image"><meta property="og:title" data-infer="" content="Metaflow Datastore Internals: Caching and Resume - Metaflowlabs"><meta property="og:description" data-infer="" content="Explore how Metaflow interacts with the datastore, enabling features like caching and resume."><link rel="canonical" href="https://metaflowlabs.nuxt.space/learn/deep-dives/persistence/datastore-internals"><meta property="og:url" content="https://metaflowlabs.nuxt.space/learn/deep-dives/persistence/datastore-internals"><meta property="og:site_name" content="Metaflowlabs"><script>"use strict";(()=>{const t=window,e=document.documentElement,c=["dark","light"],n=getStorageValue("localStorage","nuxt-color-mode")||"system";let i=n==="system"?u():n;const r=e.getAttribute("data-color-mode-forced");r&&(i=r),l(i),t["__NUXT_COLOR_MODE__"]={preference:n,value:i,getColorScheme:u,addColorScheme:l,removeColorScheme:d};function l(o){const s=""+o+"",a="";e.classList?e.classList.add(s):e.className+=" "+s,a&&e.setAttribute("data-"+a,o)}function d(o){const s=""+o+"",a="";e.classList?e.classList.remove(s):e.className=e.className.replace(new RegExp(s,"g"),""),a&&e.removeAttribute("data-"+a)}function f(o){return t.matchMedia("(prefers-color-scheme"+o+")")}function u(){if(t.matchMedia&&f("").media!=="not all"){for(const o of c)if(f(":"+o).matches)return o}return"light"}})();function getStorageValue(t,e){switch(t){case"localStorage":return window.localStorage.getItem(e);case"sessionStorage":return window.sessionStorage.getItem(e);case"cookie":return getCookie(e);default:return null}}function getCookie(t){const c=("; "+window.document.cookie).split("; "+t+"=");if(c.length===2)return c.pop()?.split(";").shift()}</script></head><body><!--teleport start anchor--><!--teleport anchor--><div id="__nuxt" class="isolate"><!--[--><!--[--><!--[--><!--[--><!--[--><header class="sticky top-0 z-50 w-full backdrop-blur flex-none border-b border-[var(--ui-border)] bg-[color:var(--ui-bg)/0.75]"><div class="w-full max-w-(--ui-container) mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between gap-2 h-16"><!--[--><div class="flex items-center gap-6"><a href="/" class="navbar-logo flex items-center" aria-label="Homepage"><div class="flex items-center"><div class="flex flex-col"><h1 class="font-bold text-xl text-[var(--ui-text-highlighted)]"> Metaflowlabs </h1></div><img alt="Metaflowlabs Logo" class="block dark:hidden w-7 h-7" src="/logo.svg"><img alt="Metaflowlabs Logo" class="hidden dark:block w-7 h-7" src="/logo.svg"></div></a></div><nav class="hidden lg:flex flex-1 justify-center items-center gap-1.5"><!--[--><!----><!----><nav data-collapsed="false" class="relative flex gap-1.5 [&amp;&gt;div]:min-w-0 items-center justify-between" aria-label="Main" data-orientation="horizontal" dir="ltr" data-reka-navigation-menu><!--[--><!--[--><!--]--><!--[--><!--[--><div style="position:relative;"><ul class="isolate min-w-0 flex items-center" data-orientation="horizontal"><!--[--><!--[--><li data-menu-item class="min-w-0 py-2"><!--[--><!--[--><a href="/learn" data-reka-collection-item class="group relative w-full flex items-center gap-1.5 font-medium text-sm before:absolute before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none dark:focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2 focus-visible:before:ring-primary px-2.5 py-1.5 before:inset-x-px before:inset-y-0 text-muted hover:text-highlighted hover:before:bg-elevated/50 transition-colors before:transition-colors data-[state=open]:text-highlighted data-[state=open]:before:bg-elevated/50"><!--[--><!--[--><!--[--><span class="iconify i-heroicons:academic-cap-solid shrink-0 size-5 text-dimmed group-hover:text-default transition-colors group-data-[state=open]:text-default" aria-hidden="true" style=""></span><!--]--><span class="truncate"><!--[-->Content<!--]--><!----></span><!----><!--]--><!--]--></a><!----><!--]--><!--]--></li><li data-menu-item class="min-w-0 py-2"><!--[--><!--[--><a href="/projects" data-reka-collection-item class="group relative w-full flex items-center gap-1.5 font-medium text-sm before:absolute before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none dark:focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2 focus-visible:before:ring-primary px-2.5 py-1.5 before:inset-x-px before:inset-y-0 text-muted hover:text-highlighted hover:before:bg-elevated/50 transition-colors before:transition-colors data-[state=open]:text-highlighted data-[state=open]:before:bg-elevated/50"><!--[--><!--[--><!--[--><span class="iconify i-heroicons:code-bracket-square-solid shrink-0 size-5 text-dimmed group-hover:text-default transition-colors group-data-[state=open]:text-default" aria-hidden="true" style=""></span><!--]--><span class="truncate"><!--[-->Projects<!--]--><!----></span><!----><!--]--><!--]--></a><!----><!--]--><!--]--></li><li data-menu-item class="min-w-0 py-2"><!--[--><!--[--><a href="/proposal" data-reka-collection-item class="group relative w-full flex items-center gap-1.5 font-medium text-sm before:absolute before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none dark:focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2 focus-visible:before:ring-primary px-2.5 py-1.5 before:inset-x-px before:inset-y-0 text-muted hover:text-highlighted hover:before:bg-elevated/50 transition-colors before:transition-colors data-[state=open]:text-highlighted data-[state=open]:before:bg-elevated/50"><!--[--><!--[--><!--[--><span class="iconify i-heroicons:information-circle-solid shrink-0 size-5 text-dimmed group-hover:text-default transition-colors group-data-[state=open]:text-default" aria-hidden="true" style=""></span><!--]--><span class="truncate"><!--[-->Proposal<!--]--><!----></span><!----><!--]--><!--]--></a><!----><!--]--><!--]--></li><li data-menu-item class="min-w-0 py-2"><!--[--><!--[--><!--[--><!--[--><button type="button" data-reka-collection-item id data-state="closed" data-navigation-menu-trigger aria-expanded="false" aria-controls class="group relative w-full flex items-center gap-1.5 font-medium text-sm before:absolute before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none dark:focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2 focus-visible:before:ring-primary px-2.5 py-1.5 before:inset-x-px before:inset-y-0 text-muted hover:text-highlighted hover:before:bg-elevated/50 transition-colors before:transition-colors data-[state=open]:text-highlighted data-[state=open]:before:bg-elevated/50"><!--[--><!--[--><!--[--><span class="iconify i-lucide:link shrink-0 size-5 text-dimmed group-hover:text-default transition-colors group-data-[state=open]:text-default" aria-hidden="true" style=""></span><!--]--><span class="truncate"><!--[-->Links<!--]--><!----></span><span class="ms-auto inline-flex gap-1.5 items-center"><!--[--><!----><span class="iconify i-lucide:chevron-down size-5 transform shrink-0 group-data-[state=open]:rotate-180 transition-transform duration-200" aria-hidden="true" style=""></span><!--]--></span><!--]--><!--]--></button><!----><!--]--><!--teleport start--><!----><!--teleport end--><!--]--><!--]--><!--]--></li><!--]--><!--]--></ul></div><!----><!--]--><!--]--><!--[--><!--]--><div class="absolute top-full left-0 flex w-full justify-center"><!----><!----></div><!--]--></nav><!--]--></nav><div class="flex items-center gap-2"><!--[--><!--[--><a href="https://github.com/metaflowlabs" rel="noopener noreferrer" target="_blank" aria-label="GitHub" class="rounded-md inline-flex items-center disabled:cursor-not-allowed aria-disabled:cursor-not-allowed disabled:opacity-75 aria-disabled:opacity-75 transition-colors font-semibold text-sm gap-1.5 text-default hover:bg-elevated focus:outline-none focus-visible:bg-elevated hover:disabled:bg-transparent dark:hover:disabled:bg-transparent hover:aria-disabled:bg-transparent dark:hover:aria-disabled:bg-transparent p-1.5"><!--[--><!--[--><span class="iconify i-simple-icons:github shrink-0 size-5 md:h-6 md:w-6" aria-hidden="true" style=""></span><!--]--><!--[--><!----><!--]--><!--[--><!----><!--]--><!--]--></a><!--]--><!--]--></div><!--]--></div></header><!--[--><div class="w-full max-w-(--ui-container) mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12"><!--[--><div><div class="breadcrumb-container mb-6"><!--[--><!--]--></div><div class="lg:flex lg:gap-8"><div class="lg:w-64 lg:shrink-0"><!--[--><div class="p-4 sticky top-20"><!--[--><!----><!----><nav data-collapsed="false" class="relative flex gap-1.5 [&amp;&gt;div]:min-w-0 flex-col" aria-label="Main" data-orientation="vertical" dir="ltr" data-reka-navigation-menu><!--[--><!--[--><!--]--><!--[--><!--[--><div style="position:relative;"><ul class="isolate min-w-0" data-orientation="vertical"><!--[--><!--[--><li data-menu-item class="min-w-0"><!--[--><!--[--><a href="/learn/deep-dives" data-reka-collection-item class="group relative w-full flex items-center gap-1.5 font-medium text-sm before:absolute before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none dark:focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2 focus-visible:before:ring-primary flex-row px-2.5 py-1.5 before:inset-y-px before:inset-x-0 text-muted hover:text-highlighted hover:before:bg-elevated/50 transition-colors before:transition-colors"><!--[--><!--[--><!--[--><!----><!--]--><span class="truncate"><!--[-->Deep Dives<!--]--><!----></span><!----><!--]--><!--]--></a><!----><!--]--><!--]--></li><li data-menu-item class="min-w-0"><!--[--><!--[--><a href="/learn/patterns" data-reka-collection-item class="group relative w-full flex items-center gap-1.5 font-medium text-sm before:absolute before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none dark:focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2 focus-visible:before:ring-primary flex-row px-2.5 py-1.5 before:inset-y-px before:inset-x-0 text-muted hover:text-highlighted hover:before:bg-elevated/50 transition-colors before:transition-colors"><!--[--><!--[--><!--[--><!----><!--]--><span class="truncate"><!--[-->Patterns<!--]--><!----></span><!----><!--]--><!--]--></a><!----><!--]--><!--]--></li><li data-menu-item class="min-w-0"><!--[--><!--[--><a href="/learn/guides" data-reka-collection-item class="group relative w-full flex items-center gap-1.5 font-medium text-sm before:absolute before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none dark:focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2 focus-visible:before:ring-primary flex-row px-2.5 py-1.5 before:inset-y-px before:inset-x-0 text-muted hover:text-highlighted hover:before:bg-elevated/50 transition-colors before:transition-colors"><!--[--><!--[--><!--[--><!----><!--]--><span class="truncate"><!--[-->Guides<!--]--><!----></span><!----><!--]--><!--]--></a><!----><!--]--><!--]--></li><li data-menu-item class="min-w-0"><!--[--><!--[--><a href="/learn/open-source" data-reka-collection-item class="group relative w-full flex items-center gap-1.5 font-medium text-sm before:absolute before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none dark:focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2 focus-visible:before:ring-primary flex-row px-2.5 py-1.5 before:inset-y-px before:inset-x-0 text-muted hover:text-highlighted hover:before:bg-elevated/50 transition-colors before:transition-colors"><!--[--><!--[--><!--[--><!----><!--]--><span class="truncate"><!--[-->Open Source<!--]--><!----></span><!----><!--]--><!--]--></a><!----><!--]--><!--]--></li><!--]--><!--]--></ul></div><!----><!--]--><!--]--><!--[--><!--]--><!----><!--]--></nav><!--]--></div><!--]--></div><div class="flex-1 min-w-0"><!--[--><article class="prose dark:prose-invert max-w-none prose-headings:scroll-mt-24"><div><h1 id="understanding-metaflows-datastore-internals-of-caching-and-resume"><!--[-->Understanding Metaflow&#39;s Datastore: Internals of Caching and Resume<!--]--></h1><p><!--[-->Metaflow&#39;s interaction with its configured datastore isn&#39;t just a background detail; it&#39;s the engine driving some of its most powerful features—like robust data versioning, highly efficient caching, and the life-saving ability to resume flows. If you&#39;ve ever wondered how Metaflow seems to magically pick up where it left off, or how it avoids recomputing steps unnecessarily, a look into its datastore mechanics will provide the answers. Let&#39;s delve into how Metaflow works with data behind the scenes.<!--]--></p><h2 id="the-power-of-content-addressed-storage"><a href="#the-power-of-content-addressed-storage"><!--[-->The Power of Content-Addressed Storage<!--]--></a></h2><p><!--[-->At the heart of Metaflow&#39;s data management is <strong><!--[-->Content-Addressed Storage (CAS)<!--]--></strong>, this is the mechanism that fundamentally shapes how Metaflow handles every piece of data—or <strong><!--[-->artifact<!--]--></strong>—you create. In the CAS model, each artifact isn&#39;t identified by a filename or a path you choose, but by a unique cryptographic hash computed directly from its serialized content. Think of this hash as the artifact&#39;s fingerprint; it becomes its &quot;address&quot; or key within Metaflow&#39;s datastore.<!--]--></p><p><!--[-->Why is this approach so effective? It offers several key benefits that you&#39;ll appreciate in your daily work:<!--]--></p><ul><!--[--><li><!--[--><strong><!--[-->Automatic Deduplication<!--]--></strong>: Imagine your flow processes a large, static dataset in multiple steps, or perhaps you re-run a flow that uses the same initial data. If different steps or even related flow runs produce the exact same data (meaning they have the identical content hash), Metaflow is smart enough to store this data <strong><!--[-->only once<!--]--></strong>. This can lead to significant storage savings, especially when you&#39;re dealing with large datasets or complex models that might be shared or regenerated.<!--]--></li><li><!--[--><strong><!--[-->Built-in Immutability and Versioning<!--]--></strong>: Since an artifact&#39;s identity <em><!--[-->is<!--]--></em> its content hash, any change to an object—no matter how tiny—will result in a brand-new hash. This means a new, distinct artifact is created in the datastore. The original remains untouched. This inherent <strong><!--[-->immutability<!--]--></strong> is crucial; it&#39;s the bedrock of Metaflow&#39;s robust versioning capabilities, ensuring that past results are stable and always reproducible.<!--]--></li><!--]--></ul><div data-orientation="vertical" class="relative overflow-hidden w-full rounded-lg p-4 flex gap-2.5 items-start bg-info text-inverted"><!--[--><span class="iconify i-heroicons:pencil-square shrink-0 size-5" aria-hidden="true" style=""></span><!--]--><div class="min-w-0 flex-1 flex flex-col"><div class="text-sm font-medium"><!--[-->Note<!--]--></div><div class="text-sm opacity-90 mt-1"><!--[--><!--[-->The concept of immutability in content-addressing is a powerful guarantee. Once an artifact is written to the datastore, it&#39;s set in stone. Any apparent &quot;change&quot; actually results in a new, versioned artifact, leaving the original intact. This is what allows you to confidently look back at past runs, knowing the data you see is exactly what was produced then. This stability is fundamental to tracking lineage and managing different data versions throughout your project&#39;s lifecycle.<!--]--><!--]--></div><!----></div><!----></div><p><!--[-->To visualize this, consider how different data objects map to unique storage locations based on their content:<!--]--></p><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" width="750" alt data-nuxt-img srcset="/_ipx/w_750/content/learn/datastore-internals-01.png 1x, /_ipx/w_1500/content/learn/datastore-internals-01.png 2x" src="/_ipx/w_750/content/learn/datastore-internals-01.png"><p><!--[-->It&#39;s not just your data artifacts that benefit from this. Metaflow also applies content-addressing to snapshot the <strong><!--[-->code package<!--]--></strong> associated with each run. This entire package (your flow script and any local modules) is bundled, hashed, and stored in the datastore. This ensures that you can always retrieve the exact version of the code that produced a specific set of artifacts, further bolstering reproducibility.<!--]--></p><h2 id="the-artifact-lifecycle-from-creation-to-datastore-and-back"><a href="#the-artifact-lifecycle-from-creation-to-datastore-and-back"><!--[-->The Artifact Lifecycle: From Creation to Datastore and Back<!--]--></a></h2><pre class="language-python shiki shiki-themes material-theme-lighter material-theme-palenight" style=""><!--[--><code><span class="line" line="1"><span class="sNZSE">from</span><span class="sv0dM"> metaflow </span><span class="sNZSE">import</span><span class="sv0dM"> FlowSpec</span><span class="s4Nzc">,</span><span class="sv0dM"> step</span><span class="s4Nzc">,</span><span class="sv0dM"> current
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span class="sBv9x">class</span><span class="s2dLm"> MyIllustrativeFlow</span><span class="s4Nzc">(</span><span class="s2dLm">FlowSpec</span><span class="s4Nzc">):
</span></span><span class="line" line="4"><span class="s4Nzc">  @</span><span class="sp2xM">step
</span></span><span class="line" line="5"><span class="sBv9x">  def</span><span class="sp2xM"> start</span><span class="s4Nzc">(</span><span class="swAhH">self</span><span class="s4Nzc">):
</span></span><span class="line" line="6"><span class="sp2xM">    print</span><span class="s4Nzc">(</span><span class="sBv9x">f</span><span class="s9-rc">&quot;Starting flow </span><span class="sRqct">{</span><span class="sp2xM">current</span><span class="s4Nzc">.</span><span class="sbA4_">run_id</span><span class="sRqct">}</span><span class="s9-rc">...&quot;</span><span class="s4Nzc">)
</span></span><span class="line" line="7"><span class="sv0dM">    self</span><span class="s4Nzc">.</span><span class="sp2xM">next</span><span class="s4Nzc">(</span><span class="sv0dM">self</span><span class="s4Nzc">.</span><span class="sbA4_">process_data</span><span class="s4Nzc">)
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span class="s4Nzc">  @</span><span class="sp2xM">step
</span></span><span class="line" line="10"><span class="sBv9x">  def</span><span class="sp2xM"> process_data</span><span class="s4Nzc">(</span><span class="swAhH">self</span><span class="s4Nzc">):
</span></span><span class="line" line="11"><span class="s742E">    # 1. Creation &amp; Assignment: An object is created in memory.
</span></span><span class="line" line="12"><span class="sv0dM">    raw_data </span><span class="s4Nzc">=</span><span class="s4Nzc"> [</span><span class="sRqct">1</span><span class="s4Nzc">,</span><span class="sRqct"> 2</span><span class="s4Nzc">,</span><span class="sRqct"> 3</span><span class="s4Nzc">,</span><span class="sRqct"> 4</span><span class="s4Nzc">,</span><span class="sRqct"> 5</span><span class="s4Nzc">]
</span></span><span class="line" line="13"><span class="sv0dM">    processed_data_object </span><span class="s4Nzc">=</span><span class="s4Nzc"> [</span><span class="sv0dM">x </span><span class="s4Nzc">*</span><span class="sRqct"> 2</span><span class="sNZSE"> for</span><span class="sv0dM"> x </span><span class="sNZSE">in</span><span class="sv0dM"> raw_data</span><span class="s4Nzc">]
</span></span><span class="line" line="14"><span emptylineplaceholder="true">
</span></span><span class="line" line="15"><span class="s742E">    # This assignment tells Metaflow to manage &#39;my_processed_data&#39;.
</span></span><span class="line" line="16"><span class="sv0dM">    self</span><span class="s4Nzc">.</span><span class="sbA4_">my_processed_data</span><span class="s4Nzc"> =</span><span class="sv0dM"> processed_data_object
</span></span><span class="line" line="17"><span class="s742E">    # self.my_processed_data now holds [2, 4, 6, 8, 10] in memory.
</span></span><span class="line" line="18"><span emptylineplaceholder="true">
</span></span><span class="line" line="19"><span class="sp2xM">    print</span><span class="s4Nzc">(</span><span class="sBv9x">f</span><span class="s9-rc">&quot;Step &#39;</span><span class="sRqct">{</span><span class="sp2xM">current</span><span class="s4Nzc">.</span><span class="sbA4_">step_name</span><span class="sRqct">}</span><span class="s9-rc">&#39;: Data processed: </span><span class="sRqct">{</span><span class="sv0dM">self</span><span class="s4Nzc">.</span><span class="sbA4_">my_processed_data</span><span class="sRqct">}</span><span class="s9-rc">&quot;</span><span class="s4Nzc">)
</span></span><span class="line" line="20"><span class="sv0dM">    self</span><span class="s4Nzc">.</span><span class="sp2xM">next</span><span class="s4Nzc">(</span><span class="sv0dM">self</span><span class="s4Nzc">.</span><span class="sbA4_">use_data</span><span class="s4Nzc">)
</span></span><span class="line" line="21"><span emptylineplaceholder="true">
</span></span><span class="line" line="22"><span class="s4Nzc">  @</span><span class="sp2xM">step
</span></span><span class="line" line="23"><span class="sBv9x">  def</span><span class="sp2xM"> use_data</span><span class="s4Nzc">(</span><span class="swAhH">self</span><span class="s4Nzc">):
</span></span><span class="line" line="24"><span emptylineplaceholder="true">
</span></span><span class="line" line="25"><span class="s742E">    # 6. Access: Metaflow retrieves &#39;my_processed_data&#39; for this step.
</span></span><span class="line" line="26"><span class="s742E">    #    - Metadata service is queried for the artifact&#39;s location (hash).
</span></span><span class="line" line="27"><span class="s742E">    #    - Byte stream is read from the datastore.
</span></span><span class="line" line="28"><span class="s742E">    #    - Deserialized back into a Python object.
</span></span><span class="line" line="29"><span class="sv0dM">    retrieved_data </span><span class="s4Nzc">=</span><span class="sv0dM"> self</span><span class="s4Nzc">.</span><span class="sbA4_">my_processed_data
</span></span><span class="line" line="30"><span class="s742E">    # retrieved_data is now [2, 4, 6, 8, 10], loaded from the datastore.
</span></span><span class="line" line="31"><span emptylineplaceholder="true">
</span></span><span class="line" line="32"><span class="sp2xM">    print</span><span class="s4Nzc">(</span><span class="sBv9x">f</span><span class="s9-rc">&quot;Step &#39;</span><span class="sRqct">{</span><span class="sp2xM">current</span><span class="s4Nzc">.</span><span class="sbA4_">step_name</span><span class="sRqct">}</span><span class="s9-rc">&#39;: Using data: </span><span class="sRqct">{</span><span class="sp2xM">retrieved_data</span><span class="sRqct">}</span><span class="s9-rc">&quot;</span><span class="s4Nzc">)
</span></span><span class="line" line="33"><span class="sv0dM">    doubled_again </span><span class="s4Nzc">=</span><span class="s4Nzc"> [</span><span class="sv0dM">x </span><span class="s4Nzc">*</span><span class="sRqct"> 2</span><span class="sNZSE"> for</span><span class="sv0dM"> x </span><span class="sNZSE">in</span><span class="sv0dM"> retrieved_data</span><span class="s4Nzc">]
</span></span><span class="line" line="34"><span class="sv0dM">    self</span><span class="s4Nzc">.</span><span class="sbA4_">final_result</span><span class="s4Nzc"> =</span><span class="sv0dM"> doubled_again
</span></span><span class="line" line="35"><span class="sv0dM">    self</span><span class="s4Nzc">.</span><span class="sp2xM">next</span><span class="s4Nzc">(</span><span class="sv0dM">self</span><span class="s4Nzc">.</span><span class="sbA4_">end</span><span class="s4Nzc">)
</span></span><span class="line" line="36"><span emptylineplaceholder="true">
</span></span><span class="line" line="37"><span class="s4Nzc">  @</span><span class="sp2xM">step
</span></span><span class="line" line="38"><span class="sBv9x">  def</span><span class="sp2xM"> end</span><span class="s4Nzc">(</span><span class="swAhH">self</span><span class="s4Nzc">):
</span></span><span class="line" line="39"><span emptylineplaceholder="true">
</span></span><span class="line" line="40"><span class="s742E">    # &#39;final_result&#39; would also be persisted after this step completes.
</span></span><span class="line" line="41"><span class="sp2xM">    print</span><span class="s4Nzc">(</span><span class="sBv9x">f</span><span class="s9-rc">&quot;Step &#39;</span><span class="sRqct">{</span><span class="sp2xM">current</span><span class="s4Nzc">.</span><span class="sbA4_">step_name</span><span class="sRqct">}</span><span class="s9-rc">&#39;: Final result: </span><span class="sRqct">{</span><span class="sv0dM">self</span><span class="s4Nzc">.</span><span class="sbA4_">final_result</span><span class="sRqct">}</span><span class="s9-rc">&quot;</span><span class="s4Nzc">)
</span></span><span class="line" line="42"><span class="sp2xM">    print</span><span class="s4Nzc">(</span><span class="sBv9x">f</span><span class="s9-rc">&quot;Flow </span><span class="sRqct">{</span><span class="sp2xM">current</span><span class="s4Nzc">.</span><span class="sbA4_">run_id</span><span class="sRqct">}</span><span class="s9-rc"> finished.&quot;</span><span class="s4Nzc">)
</span></span><span class="line" line="43"><span emptylineplaceholder="true">
</span></span><span class="line" line="44"><span class="s742E"># Upon step &#39;process_data&#39; completion:
</span></span><span class="line" line="45"><span class="s742E"># 2. Serialization: `self.my_processed_data` (the list [2, 4, 6, 8, 10]) is serialized (e.g., pickled).
</span></span><span class="line" line="46"><span class="s742E"># 3. Hashing: A content hash (e.g., SHA1) is computed from the serialized bytes.
</span></span><span class="line" line="47"><span class="s742E"># 4. Persistence (Write to Datastore): The serialized bytes are written to the datastore,
</span></span><span class="line" line="48"><span class="s742E">#    often using the hash as part of its storage key. This is a datastore write operation.
</span></span><span class="line" line="49"><span class="s742E"># 5. Metadata Update: Metaflow&#39;s metadata service records info about this artifact:
</span></span><span class="line" line="50"><span class="s742E">#    flow, run ID, step name, task ID, and its content hash.
</span></span></code><!--]--></pre><p><!--[-->When we talk about the &quot;artifact lifecycle,&quot; we&#39;re describing the journey of a piece of data. This journey starts the moment you assign it to an attribute of self (like self.my_data = some_object) within a Metaflow step, continues as it&#39;s persisted in the datastore, and completes when it&#39;s retrieved for use in later steps or by external tools. Understanding this lifecycle, especially its interactions with the datastore, is key to grasping how Metaflow effectively manages data throughout your workflow.<!--]--></p><h3 id="stages-of-the-artifact-lifecycle"><a href="#stages-of-the-artifact-lifecycle"><!--[-->Stages of the Artifact Lifecycle<!--]--></a></h3><p><!--[-->Let&#39;s break down the typical stages:<!--]--></p><ol><!--[--><li><!--[--><strong><!--[-->Creation &amp; Assignment<!--]--></strong>: The lifecycle kicks off inside a step when a Python object is assigned to an instance variable of your flow class, for instance, <code><!--[-->self.my_model = trained_model_object<!--]--></code>. At this exact moment, the object exists purely in the memory of the task executing that step.<!--]--></li><li><!--[--><strong><!--[-->Serialization<!--]--></strong>: As soon as the step finishes successfully, Metaflow automatically takes all objects assigned to <code><!--[-->self<!--]--></code> (like <code><!--[-->self.my_model<!--]--></code>) and serializes them. This process, usually handled by Python&#39;s <code><!--[-->pickle<!--]--></code> module, converts your live Python objects into a byte stream. This byte stream format is what&#39;s suitable for storage and for sending across a network if needed.<!--]--></li><li><!--[--><strong><!--[-->Hashing<!--]--></strong>: Right after serialization, a content hash (e.g., a SHA1 hash) is computed from this byte stream. As we discussed under &quot;Content-Addressed Storage,&quot; this hash acts as a unique fingerprint for the artifact&#39;s content.<!--]--></li><li><!--[--><strong><!--[-->Persistence (Write to Datastore)<!--]--></strong>: The serialized byte stream is then written to Metaflow&#39;s configured datastore (like Amazon S3 or a local file system). This is a critical datastore write operation. The artifact is typically stored in a way that its content hash forms part of its storage path or key, directly linking its unique identity to its physical location.<!--]--></li><li><!--[--><strong><!--[-->Metadata Update<!--]--></strong>: Simultaneously, Metaflow&#39;s metadata service (which could be running locally or be a remote service like the Metaflow Service) gets an update. This update logs essential information about the newly minted artifact: it links the artifact to the specific flow, run ID, step name, task ID, and, crucially, its content hash. This metadata acts like an index or a card catalog, allowing Metaflow to efficiently find and retrieve artifacts later on.<!--]--></li><li><!--[--><strong><!--[-->Access (Read from Datastore)<!--]--></strong>: When a subsequent step in your flow needs this artifact (e.g., it tries to access <code><!--[-->self.my_model<!--]--></code>), or when you access it using the Metaflow Client API (e.g., <code><!--[-->Run(&#39;MyFlow/123&#39;).data.my_model<!--]--></code>), the process is essentially reversed:<ul><!--[--><li><!--[-->Metaflow first consults the metadata service to find the location of the required artifact, using the recorded hash.<!--]--></li><li><!--[-->It then retrieves the corresponding byte stream from the datastore. This is a datastore read operation.<!--]--></li><li><!--[-->Finally, this byte stream is deserialized (unpickled) back into a Python object in the memory of the task or client environment that requested it. This makes <code><!--[-->self.my_model<!--]--></code> (or <code><!--[-->run.data.my_model<!--]--></code>) available again, with its original content intact.<!--]--></li><!--]--></ul><!--]--></li><!--]--></ol><p><!--[-->A vital aspect to remember is immutability. Once an artifact makes it to the datastore (Stage 4), it&#39;s considered unchangeable. If a step is re-run (perhaps due to a resume or a new run) and the value of self.my_model changes, this will trigger a new serialization, generate a new hash, and consequently, a new, distinct artifact will be created and stored. The original artifact from the previous attempt remains untouched in the datastore, associated with its original task.<!--]--></p><p><!--[-->The following diagram visually summarizes this lifecycle:<!--]--></p><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" width="750" alt data-nuxt-img srcset="/_ipx/w_750/content/learn/datastore-internals-02.png 1x, /_ipx/w_1500/content/learn/datastore-internals-02.png 2x" src="/_ipx/w_750/content/learn/datastore-internals-02.png"><p><!--[-->This carefully orchestrated lifecycle ensures that your data is managed consistently, versioned effectively, and can be reliably passed between different parts of a Metaflow workflow, all underpinned by robust interactions with the datastore and the metadata service.<!--]--></p><div data-orientation="vertical" class="relative overflow-hidden w-full rounded-lg p-4 flex gap-2.5 items-start bg-info text-inverted"><!--[--><span class="iconify i-heroicons:pencil-square shrink-0 size-5" aria-hidden="true" style=""></span><!--]--><div class="min-w-0 flex-1 flex flex-col"><div class="text-sm font-medium"><!--[-->Note<!--]--></div><div class="text-sm opacity-90 mt-1"><!--[--><!--[-->When your Metaflow setup uses a remote datastore like Amazon S3, several of these interactions—such as uploading code packages, writing and reading artifacts, or any explicit S3 client calls within your steps—will involve network operations. The speed and efficiency of these operations can be influenced by factors like the size of your artifacts, your network bandwidth, and the current performance of S3.<!--]--><!--]--></div><!----></div><!----></div><p><!--[-->How Metaflow Makes resume Possible<!--]--></p><p><!--[-->One of Metaflow&#39;s most valued features, especially when you&#39;re building complex or long-running pipelines, is the ability to <code><!--[-->resume<!--]--></code> a flow that failed or was interrupted. Instead of having to restart the entire computation from the very beginning—which can be incredibly time-consuming and costly—<code><!--[-->resume<!--]--></code> allows the flow to pick up from the point of failure. This capability is a massive productivity booster. The <code><!--[-->resume<!--]--></code> mechanism is deeply connected to Metaflow&#39;s persistence strategy and relies on a few key components working together:<!--]--></p><h3 id="key-components-of-resumption"><a href="#key-components-of-resumption"><!--[-->Key Components of Resumption<!--]--></a></h3><ol><!--[--><li><!--[--><strong><!--[-->Step-as-Checkpoint<!--]--></strong>: As we&#39;ve seen, every step in Metaflow inherently acts as a checkpoint. Upon the successful completion of any step, all its output artifacts (any data you&#39;ve assigned to <code><!--[-->self<!--]--></code>) are durably persisted in the configured datastore. This ensures that the state of your flow is systematically saved at regular intervals.<!--]--></li><li><!--[--><strong><!--[-->Tracking Run State<!--]--></strong>: The Metaflow metadata service meticulously keeps track of the status (e.g., <code><!--[-->running<!--]--></code>, <code><!--[-->completed<!--]--></code>, <code><!--[-->failed<!--]--></code>) of each individual step within every run. This provides a clear, auditable record of the flow&#39;s progress and allows Metaflow to pinpoint exactly where a failure occurred.<!--]--></li><li><!--[--><strong><!--[-->Content-Addressing for Code and Data<!--]--></strong>: When you initiate a <code><!--[-->resume<!--]--></code> (e.g., by running <code><!--[-->python my_flow.py resume<!--]--></code>), Metaflow first examines the state of the previously attempted run. For each step, it performs a crucial comparison: it looks at the content hash of the current code for that step and the hashes of its input artifact dependencies, and compares them against what was recorded for any previous successful execution of that same step within the same run lineage.<!--]--></li><li><!--[--><strong><!--[-->Skipping the Already Done<!--]--></strong>: If the code for a step and its input artifacts (which are derived from successfully completed parent steps) haven&#39;t changed relative to a previously successful execution of that step in the current run lineage, Metaflow intelligently skips re-executing that step. It simply loads the previously computed output artifacts for that step directly from the datastore, presenting them to downstream steps as if the step had just run. This behavior is fundamental to <code><!--[-->resume<!--]--></code> and, as we&#39;ll see shortly, is also the core principle behind Metaflow&#39;s caching.<!--]--></li><li><!--[--><strong><!--[-->Resuming from the Point of Failure<!--]--></strong>: If a step had previously failed, the <code><!--[-->resume<!--]--></code> command will attempt to re-execute that specific failed step (and, naturally, all subsequent steps in the Directed Acyclic Graph, or DAG). Importantly, the input artifacts that this failed step requires are loaded from the datastore, ensuring it starts with the exact same state as its previous, unsuccessful attempt.<!--]--></li><!--]--></ol><div data-orientation="vertical" class="relative overflow-hidden w-full rounded-lg p-4 flex gap-2.5 items-start bg-secondary text-inverted" type="info" data-v-1a09141d><!--[--><span class="iconify i-heroicons:light-bulb-solid shrink-0 size-5" aria-hidden="true" style=""></span><!--]--><div class="min-w-0 flex-1 flex flex-col"><!----><div class="text-sm opacity-90"><!--[--><!--[-->The Core Benefit of resume: The most significant advantage of the resume feature is the substantial saving of computational time and resources. By cleverly avoiding the re-execution of parts of your workflow that have already completed successfully, you can iterate much faster, especially when debugging or dealing with transient issues.<!--]--><!--]--></div><!----></div><!----></div><p><!--[-->Imagine this scenario:<!--]--></p><p><!--[--><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="Diagram illustrating flow resumption: Step A and B completed, Step C failed. On resume, Step A and B are skipped (outputs loaded from datastore), and execution restarts from Step C." data-nuxt-img srcset="/_ipx/_/content/learn/datastore-internals-03.png 1x, /_ipx/_/content/learn/datastore-internals-03.png 2x" src="/_ipx/_/content/learn/datastore-internals-03.png"><!--]--></p><p><!--[-->It&#39;s the combination of automatic artifact persistence (checkpointing), detailed metadata tracking, and content-addressing for both your data and your code that makes this intelligent resumption possible. This allows you to build more resilient pipelines and iterate on your work with greater speed and confidence.<!--]--></p><p><!--[-->Understanding Caching Behavior<!--]--></p><p><!--[-->Metaflow&#39;s caching mechanism is another powerful feature designed to significantly speed up your workflow execution. It achieves this by cleverly avoiding the recomputation of steps whose code and inputs haven&#39;t changed since a previous successful run. This behavior shares its foundational principles with the resume functionality, relying heavily on content-addressing and the persistent nature of artifacts in the datastore.<!--]--></p><h3 id="how-caching-works"><a href="#how-caching-works"><!--[-->How Caching Works<!--]--></a></h3><p><!--[-->Before executing any step in your flow, Metaflow performs an internal check. It tries to determine if an identical version of that step—considering its code, its input artifacts, and implicitly its execution environment (like Python library versions defined via @conda or @pypi decorators)—has been successfully executed before within the same flow lineage (i.e., for the same flow name).<!--]--></p><p><!--[-->If all these conditions perfectly match a previously recorded successful execution, Metaflow achieves what we call a &quot;cache hit.&quot; In this scenario:<!--]--></p><ol><!--[--><li><!--[-->The actual code execution for the step is <strong><!--[-->skipped entirely<!--]--></strong>.<!--]--></li><li><!--[-->Metaflow directly retrieves the previously computed and stored output artifacts for that step from the datastore. These artifacts are then made available to any downstream steps, exactly as if the step had just run anew.<!--]--></li><!--]--></ol><p><!--[-->If any of these conditions do not match (a &quot;cache miss&quot;), the step is executed normally. Its new output artifacts are then persisted to the datastore, potentially becoming candidates for caching in future runs.<!--]--></p><h3 id="conditions-for-a-cache-hit"><a href="#conditions-for-a-cache-hit"><!--[-->Conditions for a Cache Hit<!--]--></a></h3><p><!--[-->For Metaflow to decide to use a cached result for a step, the following conditions must generally hold true:<!--]--></p><ul><!--[--><li><!--[--><strong><!--[-->Identical Code<!--]--></strong>: The content-hash of the current code for the step must be identical to the content-hash of the code from a previous successful execution of that step. Any change to your step&#39;s code will break the cache.<!--]--></li><li><!--[--><strong><!--[-->Identical Input Artifacts<!--]--></strong>: The content-hashes of all input artifacts for the current attempt of the step must perfectly match the content-hashes of the input artifacts from that same previous successful execution. If any upstream data changes, this step (and subsequent ones) will likely recompute.<!--]--></li><li><!--[--><strong><!--[-->Consistent Environment<!--]--></strong>: While not always hashed as a separate, explicit entity, the execution environment should be consistent. This includes factors like the Python version and, importantly, library versions managed by decorators like <code><!--[-->@conda<!--]--></code> or <code><!--[-->@pypi<!--]--></code>. Changes in these can lead to different code behavior or artifact serialization, implicitly causing a cache miss even if your direct step code hasn&#39;t changed.<!--]--></li><!--]--></ul><h3 id="benefits-of-caching"><a href="#benefits-of-caching"><!--[-->Benefits of Caching<!--]--></a></h3><ul><!--[--><li><!--[--><strong><!--[-->Saves Precious Computation Time<!--]--></strong>: By skipping redundant computations for steps that haven&#39;t changed, caching can dramatically reduce the overall runtime of your flows. This is especially true for steps involving intensive processing, data loading, or model training.<!--]--></li><li><!--[--><strong><!--[-->Conserves Computational Resources<!--]--></strong>: Avoiding re-execution means less demand on CPU, memory, and other resources. In cloud environments, this can translate directly into cost savings.<!--]--></li><li><!--[--><strong><!--[-->Accelerates Iterative Development<!--]--></strong>: Caching shines during the development and debugging phases of your project.<!--]--></li><!--]--></ul><div data-orientation="vertical" class="relative overflow-hidden w-full rounded-lg p-4 flex gap-2.5 items-start bg-secondary text-inverted" type="info" data-v-1a09141d><!--[--><span class="iconify i-heroicons:light-bulb-solid shrink-0 size-5" aria-hidden="true" style=""></span><!--]--><div class="min-w-0 flex-1 flex flex-col"><!----><div class="text-sm opacity-90"><!--[--><!--[-->Speed Up Your Iterations with Caching: Caching is a huge boon when you&#39;re actively developing or refining a specific part of your flow, perhaps a downstream modeling step. You can re-run the entire flow, and Metaflow will quickly skip through all the earlier, unchanged steps, allowing you to get to the part you&#39;re working on much faster. This enables rapid experimentation and significantly quicker feedback cycles.<!--]--><!--]--></div><!----></div><!----></div><p><!--[-->The caching logic can be visualized as follows:<!--]--></p><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" width="500" alt data-nuxt-img srcset="/_ipx/w_500/content/learn/datastore-internals-04.png 1x, /_ipx/w_1000/content/learn/datastore-internals-04.png 2x" src="/_ipx/w_500/content/learn/datastore-internals-04.png"><p><!--[-->By smartly leveraging content-addressing and the robust persistence of artifacts, Metaflow&#39;s caching provides an intelligent way to optimize workflow execution, often without requiring any manual intervention or configuration from you, the developer.<!--]--></p><p><!--[-->Wrapping Up: Why Datastore Internals Matter to You<!--]--></p><p><!--[-->Metaflow&#39;s sophisticated dance with its datastore, built on principles like content-addressed storage and a meticulously defined artifact lifecycle, is far more than just an internal implementation detail. It&#39;s the very foundation of the framework&#39;s power, reliability, and developer-friendliness.<!--]--></p><h3 id="key-features-enabled-by-datastore-internals"><a href="#key-features-enabled-by-datastore-internals"><!--[-->Key Features Enabled by Datastore Internals<!--]--></a></h3><p><!--[-->As we&#39;ve explored, the ability to uniquely identify, immutably store, and efficiently retrieve every artifact and even the code itself is what enables key features that you likely use every day:<!--]--></p><ul><!--[--><li><!--[--><strong><!--[-->Efficient Caching<!--]--></strong>: Saving you time and computational resources by intelligently skipping already-computed steps.<!--]--></li><li><!--[--><strong><!--[-->Robust Flow Resumption (<code><!--[-->resume<!--]--></code>)<!--]--></strong>: Allowing you to pick up right where you left off after failures, making your development process more resilient.<!--]--></li><li><!--[--><strong><!--[-->Reliable Versioning and Reproducibility<!--]--></strong>: Giving you confidence that you can always revisit past results and understand exactly how they were produced.<!--]--></li><!--]--></ul><h3 id="empowering-your-workflow-development"><a href="#empowering-your-workflow-development"><!--[-->Empowering Your Workflow Development<!--]--></a></h3><p><!--[-->Understanding when and how Metaflow interacts with the datastore—from the initial packaging of your code to the persistence and retrieval of every single artifact—provides you with crucial insights. This knowledge helps in:<!--]--></p><ul><!--[--><li><!--[-->Predicting workflow behavior.<!--]--></li><li><!--[-->Understanding performance characteristics (e.g., why a step might be slow if it&#39;s frequently reading/writing large artifacts to a remote store).<!--]--></li><li><!--[-->Developing more effective debugging strategies.<!--]--></li><!--]--></ul><p><!--[-->Ultimately, a solid grasp of these datastore internals empowers you to design more efficient, resilient, and debuggable Metaflow workflows. It allows you to fully harness the framework&#39;s capabilities to manage complex data pipelines with greater confidence and productivity.<!--]--></p><style>html pre.shiki code .sNZSE, html code.shiki .sNZSE{--shiki-default:#39ADB5;--shiki-default-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic}html pre.shiki code .sv0dM, html code.shiki .sv0dM{--shiki-default:#90A4AE;--shiki-dark:#BABED8}html pre.shiki code .s4Nzc, html code.shiki .s4Nzc{--shiki-default:#39ADB5;--shiki-dark:#89DDFF}html pre.shiki code .sBv9x, html code.shiki .sBv9x{--shiki-default:#9C3EDA;--shiki-dark:#C792EA}html pre.shiki code .s2dLm, html code.shiki .s2dLm{--shiki-default:#E2931D;--shiki-dark:#FFCB6B}html pre.shiki code .sp2xM, html code.shiki .sp2xM{--shiki-default:#6182B8;--shiki-dark:#82AAFF}html pre.shiki code .swAhH, html code.shiki .swAhH{--shiki-default:#E53935;--shiki-default-font-style:italic;--shiki-dark:#F07178;--shiki-dark-font-style:italic}html pre.shiki code .s9-rc, html code.shiki .s9-rc{--shiki-default:#91B859;--shiki-dark:#C3E88D}html pre.shiki code .sRqct, html code.shiki .sRqct{--shiki-default:#F76D47;--shiki-dark:#F78C6C}html pre.shiki code .sbA4_, html code.shiki .sbA4_{--shiki-default:#E53935;--shiki-dark:#F07178}html pre.shiki code .s742E, html code.shiki .s742E{--shiki-default:#90A4AE;--shiki-default-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}</style></div></article><div class="mt-12 pt-8 border-t border-[var(--ui-border)] flex items-center justify-between gap-8"><!--[--><a href="/learn/deep-dives/persistence" class="rounded-md inline-flex items-center disabled:cursor-not-allowed aria-disabled:cursor-not-allowed disabled:opacity-75 aria-disabled:opacity-75 transition-colors font-semibold px-2.5 py-1.5 text-sm gap-1.5 ring ring-inset ring-accented text-default bg-default hover:bg-elevated disabled:bg-default aria-disabled:bg-default focus:outline-none focus-visible:ring-2 focus-visible:ring-inverted text-left"><!--[--><!--[--><span class="iconify i-heroicons:arrow-left-solid shrink-0 size-5" aria-hidden="true" style=""></span><!--]--><!--[--><span class="truncate">Persistence Overview</span><!--]--><!--[--><!----><!--]--><!--]--></a><!--]--><!--[--><a href="/learn/patterns" class="rounded-md inline-flex items-center disabled:cursor-not-allowed aria-disabled:cursor-not-allowed disabled:opacity-75 aria-disabled:opacity-75 transition-colors font-semibold px-2.5 py-1.5 text-sm gap-1.5 ring ring-inset ring-accented text-default bg-default hover:bg-elevated disabled:bg-default aria-disabled:bg-default focus:outline-none focus-visible:ring-2 focus-visible:ring-inverted text-right"><!--[--><!--[--><!----><!--]--><!--[--><span class="truncate">Patterns</span><!--]--><!--[--><span class="iconify i-heroicons:arrow-right-solid shrink-0 size-5" aria-hidden="true" style=""></span><!--]--><!--]--></a><!--]--></div><!----><!--]--><!--[--><!--]--></div><!----></div></div><!--]--></div><!--]--><footer class="border-t border-[var(--ui-border)] mt-auto"><div class="w-full max-w-(--ui-container) mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12"><!--[--><div class="grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-12 mb-12"><p class="text-xs text-[var(--ui-text-muted)]"> © 2025 Metaflowlabs. All rights reserved. </p><!--[--><div><h3 class="text-sm font-semibold text-[var(--ui-text-highlighted)] mb-3">Resources</h3><ul class="space-y-3" role="list"><!--[--><li><a href="/learn" class="focus-visible:outline-primary transition-colors text-[var(--ui-text-muted)] hover:text-[var(--ui-text-highlighted)] text-sm"><!--[--><!--[-->Content<!--]--><!--]--></a></li><li><a href="/projects" class="focus-visible:outline-primary transition-colors text-[var(--ui-text-muted)] hover:text-[var(--ui-text-highlighted)] text-sm"><!--[--><!--[-->Projects<!--]--><!--]--></a></li><li><a href="/proposal" class="focus-visible:outline-primary transition-colors text-[var(--ui-text-muted)] hover:text-[var(--ui-text-highlighted)] text-sm"><!--[--><!--[-->Proposal<!--]--><!--]--></a></li><!--]--></ul></div><div><h3 class="text-sm font-semibold text-[var(--ui-text-highlighted)] mb-3">Ecosystem</h3><ul class="space-y-3" role="list"><!--[--><li><!--[--><a href="https://docs.metaflow.org/" rel="noopener noreferrer" target="_blank" class="focus-visible:outline-primary transition-colors text-[var(--ui-text-muted)] hover:text-[var(--ui-text-highlighted)] text-sm"><!--[--><!--[-->Metaflow Docs<!--]--><!--]--></a><!--]--></li><li><!--[--><a href="https://outerbounds.com/" rel="noopener noreferrer" target="_blank" class="focus-visible:outline-primary transition-colors text-[var(--ui-text-muted)] hover:text-[var(--ui-text-highlighted)] text-sm"><!--[--><!--[-->Outerbounds<!--]--><!--]--></a><!--]--></li><li><!--[--><a href="https://github.com/metaflowlabs" rel="noopener noreferrer" target="_blank" class="focus-visible:outline-primary transition-colors text-[var(--ui-text-muted)] hover:text-[var(--ui-text-highlighted)] text-sm"><!--[--><!--[-->GitHub<!--]--><!--]--></a><!--]--></li><!--]--></ul></div><!--]--><!--[--><a href="/llms-full.txt" rel="noopener noreferrer" target="_blank" class="focus-visible:outline-primary transition-colors text-xs text-[var(--ui-text-muted)] hover:text-[var(--ui-text-highlighted)]"><!--[--><!--[--> llms.txt <!--]--><!--]--></a><!--]--></div><!--]--></div></footer><div class="nuxt-loading-indicator" style="position:fixed;top:0;right:0;left:0;pointer-events:none;width:auto;height:3px;opacity:0;background:repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%);background-size:Infinity% auto;transform:scaleX(0%);transform-origin:left;transition:transform 0.1s, height 0.4s, opacity 0.4s;z-index:999999;"></div><!--]--><!--]--><!--[--><!--]--><!----><!--]--><!--[--><!--]--><!--]--><!--]--></div><div id="teleports"></div><script type="application/ld+json" data-nuxt-schema-org="true" data-hid="schema-org-graph">{"@context":"https://schema.org","@graph":[{"@id":"https://metaflowlabs.nuxt.space/#website","@type":"WebSite","description":"Metaflowlabs is an all-in-one development hub for Metaflow, providing in-depth guides, tutorials and reusable patterns for working with Metaflow.","inLanguage":"en","name":"Metaflowlabs","url":"https://metaflowlabs.nuxt.space/"},{"@id":"https://metaflowlabs.nuxt.space/learn/deep-dives/persistence/datastore-internals#webpage","@type":"WebPage","description":"Explore how Metaflow interacts with the datastore, enabling features like caching and resume.","name":"Metaflow Datastore Internals: Caching and Resume","url":"https://metaflowlabs.nuxt.space/learn/deep-dives/persistence/datastore-internals","isPartOf":{"@id":"https://metaflowlabs.nuxt.space/#website"},"potentialAction":[{"@type":"ReadAction","target":["https://metaflowlabs.nuxt.space/learn/deep-dives/persistence/datastore-internals"]}]}]}</script><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/learn/deep-dives/persistence/datastore-internals/_payload.json?e8a50514-ba79-48d6-ba68-8e0d052a8232">[{"state":1,"once":18,"_errors":19,"serverRendered":5,"path":21,"prerenderedAt":22},["Reactive",2],{"$scolor-mode":3,"$snuxt-seo-utils:routeRules":7,"$stoasts":8,"$ssite-config":9},{"preference":4,"value":4,"unknown":5,"forced":6},"system",true,false,{"head":-1,"seoMeta":-1},[],{"_priority":10,"defaultLocale":13,"description":14,"env":15,"name":16,"url":17},{"name":11,"env":12,"url":11,"description":11,"defaultLocale":11},-3,-15,"en","Metaflowlabs is an all-in-one development hub for Metaflow, providing in-depth guides, tutorials and reusable patterns for working with Metaflow.","production","Metaflowlabs","https://metaflowlabs.nuxt.space",["Set"],["ShallowReactive",20],{"learn-content-/learn/deep-dives/persistence/datastore-internals":-1,"learn-/learn/deep-dives/persistence/datastore-internals-articles":-1,"learn-surround-/learn/deep-dives/persistence/datastore-internals":-1},"/learn/deep-dives/persistence/datastore-internals",1751421603221]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{"seo-utils":{canonicalQueryWhitelist:["page","sort","filter","search","q","category","tag"],canonicalLowercase:true},content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},preview:{api:"https://api.nuxt.studio",iframeMessagingAllowedOrigins:""}},app:{baseURL:"/",buildId:"e8a50514-ba79-48d6-ba68-8e0d052a8232",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>